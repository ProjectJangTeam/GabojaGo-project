<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.gabojago.dao.RecommendationDao">

    <!-- 자바 객체의 프로퍼티와 컬럼 이름을 연결 -->
    <resultMap type="recommendation" id="recommendationMap">
        <result column="RECONO" property="recono"/>
        <result column="TITLE" property="title"/>
        <result column="CNT" property="cnt"/>
        <result column="WDATE" property="wdate"/>
        <result column="ACT" property="act"/>
        <result column="PET" property="pet"/>
        <result column="FRD" property="frd"/>
        <result column="CPLE" property="cple"/>
        <result column="FMLY" property="fmly"/>
        <result column="SOLO" property="solo"/>
        <result column="TPNO" property="tpno"/>

        <association property="writer" javaType="member">
            <id column="ID" property="id"/>
            <result column="NAME" property="name"/>
        </association>

        <collection property="jangSoReviews" ofType="jangSoReview">
            <id column="PRVNO" property="prvno"/>
            <result column="CONT" property="cont"/>
        </collection>

        <!--        <collection property="jangSo" javaType="jangSo">-->
        <!--            <id column="PLNO" property="plno"/>-->
        <!--            <result column="PLNAME" property="plname"/>-->
        <!--        </collection>-->
    </resultMap>


    <select id="recommendationList" resultMap="recommendationMap">
        select
        recono, title, wdate
        from
        jang_so_recommendation
        where
        act=true
    </select>

    <insert id="recommendationAdd" parameterType="recommendation">
        insert into jang_so_recommendation(id, title, wdate, cnt, act, frd, cple, fmly, solo, tpno)
        values('user8', #{title} , '2022-11-03', 9, true, true, true, true, true, 1)
    </insert>

    <select id="getRecommendation" resultMap="recommendationMap">
        select
        recono,
        title,
        cnt,
        wdate,
        act,
        pet,
        frd,
        cple,
        fmly,
        solo,
        tpno
        from
        jang_so_recommendation
        where recono = #{value}
    </select>

    <update id="disableRecommend">
        update jang_so_recommendation set
        act=false
        where recono=#{recono}
    </update>





</mapper>